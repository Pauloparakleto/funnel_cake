digraph finite_state_machine {
	node [shape = box];
<% User.states.each do |s| -%>
	<%=s%> [label = "<%= s.to_s.titleize %>", style=solid];
<% end -%>

<% User.event_table.each do |ev_name, ev| -%>
	<% User.transition_table[ev_name].each do |trans| -%>
		<%=trans.from%> -> <%=trans.to%> [ label = "<%= ev_name.to_s.titleize %>", style=bold ];
	<% end -%>
<% end -%>
}

